package sandbox

import (
	"encoding/hex"
	"log"
	"testing"

	"github.com/bsv-blockchain/go-sdk/chainhash"
	"github.com/bsv-blockchain/go-sdk/transaction"
	"github.com/stretchr/testify/assert"
)

// var beefBytes, _ = hex.DecodeString("0101010164add8752c272c6a051f0aa5ce54535c1fa1f46537a28481c9cd233c847af0220200beef02fef97f0d000c028c02fab4bdccb687caf71f15d1d9123855bd03613e260202da2f60ed396a4a8de4268d0264add8752c272c6a051f0aa5ce54535c1fa1f46537a28481c9cd233c847af02201470087bb90cf5bb7faa2be4b20e5a299f81d7812b9ecd0dc17bb27276596cc118ce9012200b07d85eebaa75c5a6346a1705782f0a961167550af9be34a472558fb1fd1a8d40110009016610e004fd5d8dc2c0f859b1c472534e96fdf7ac65401752f7db0af77e41f01090009e5ff83797c77bde8e37d7b8a7e28c9f638f6e5d849a8639643cbe1207d95b3010500424442e9ad03f570b50c4222f2db8f126b2d4600b54c6142933a34e5a7ce909b01030010d27593a68e5b60470dc474d71d999d12ee24db3d672345da6a68e8b9c3fa8901000026511d8a8460159128de58c18eb149612c55ebf6bb21d5389c025173f9042c840101001abecfb05cf4811bc2d100d9fe577bfe4eae325d14952d8f902fae67333d331e0101004b0eacb34431257e64cc9b16b187991ebc59ebf51785733abe853b97201496bd010100aa108eca5c2e6dc337a0105f4a327e4860eef22bb2a222f0326c70a791705e21010100167f7d8efeac43653548170a5ddaf428cb7fbcd52a2e95f8f598161fd5c14814fef87f0d00090296021935121cc48c3bcfebf0998fc8f96522eeb1954c69aeaec6b2d371aad5fd215d9702437844b1a543120297ce158aa4761cfa5b71ff5db6e3fed1141bb072aa351a0a014a00660b32bf2efbebc1d27ee46f6fb417fa8ed6d977ebafa584b1d29cab445974e8012400d44bf7c23ef849da1a74b4b92dc01f485c690dcca51969029a8b7a7954e581b401130011e2e78c09eb8303945c222e2b220ac36a8e3be6310dfbea8d427d4db9159198010800bee0c057128f03b05d633e89613e4512748a674f1f0af8e96762f7ad4d6f7c11010500dfb90efaf74c75b11ba6ac7f140cce4c5672d59ad22fbd37ac21fe3575c85504010300cb2a46015c24fc5b1a58ec40919ad159720536ea35dfd4900fe97a3c49bf78ca010000244f73563eac420c3bd5ca456899a2e74fa8a24741e9f741c7cfa882ad663ffa010100d2ba0eb1e9d322ac91090f4f3f58155657fb505686978f1f4cfe951c4054ac2103000100000002437844b1a543120297ce158aa4761cfa5b71ff5db6e3fed1141bb072aa351a0a02000000b4483045022100f7fec2ad590b82e049e6fea732c69c69808f0254008c1be910bfa2b7cd6cb23c022038836af7c3752feef60003e81344f653fa47e344f66f77774ad5a9f474a7e5b1414830450221009af86a29abd4e516f0e1fdebf22382d0d2bf964f1078570c7111dab5007df4e202200610fa7088922025cec9132ccf5171e00b9424b88e500a19f37d55174d39f28bc12103e89354e2a5bf62162fb0c1345cf35921571cc52ccb216bd0e0f7856e561ce7ccfffffffffab4bdccb687caf71f15d1d9123855bd03613e260202da2f60ed396a4a8de426000000006a47304402203b0180d4ad4f04fbd30f3e5f3753eccc14b16f7af74714c5f56079b05a1fb638022060eb0655597805c49f43a4f87d12a73dfe9690f680dcbee81b8c6e29f029d5db4121020a177d6a5e6f3a8689acd2e313bd1cf0dcf5a243d1cc67b7218602aee9e04b2fffffffff030100000000000000d10063036f726451126170706c69636174696f6e2f6273762d3230004c777b2270223a226273762d3230222c226f70223a227472616e73666572222c226964223a22616535396633623839386563363161636264623663633761323435666162656465643063303934626630343666333532303661336165633630656638383132375f30222c22616d74223a22353030303030227d6876a9149c7300b41a00a134e4e6ece4d3c01c8947db05e188ad21020a177d6a5e6f3a8689acd2e313bd1cf0dcf5a243d1cc67b7218602aee9e04b2fac0100000000000000ce0063036f726451126170706c69636174696f6e2f6273762d3230004c747b2270223a226273762d3230222c226f70223a227472616e73666572222c226964223a22616535396633623839386563363161636264623663633761323435666162656465643063303934626630343666333532303661336165633630656638383132375f30222c22616d74223a22313030227d6876a9145d34be178f0bc32c3d85671427f1e70694ca8a3b88ad21020a177d6a5e6f3a8689acd2e313bd1cf0dcf5a243d1cc67b7218602aee9e04b2fac0100000000000000d20063036f726451126170706c69636174696f6e2f6273762d3230004c787b2270223a226273762d3230222c226f70223a227472616e73666572222c226964223a22616535396633623839386563363161636264623663633761323435666162656465643063303934626630343666333532303661336165633630656638383132375f30222c22616d74223a2236393938373030227d6876a914c28362898660c27aea1d07d308caa8e9d7c3f75188ad21020a177d6a5e6f3a8689acd2e313bd1cf0dcf5a243d1cc67b7218602aee9e04b2fac0000000001000100000001594087389f20821e47f352a556cd4ac839495debab97ec3113824dd92ce18544010000006a4730440220145a5e2dbc481724d70787aa35b0e55d6350a7b440934f415f78a1ba9e5b9f1002203d0d1594c118f612598331873db193cd901041b8ec23a486db60831bbedbc3624121020a177d6a5e6f3a8689acd2e313bd1cf0dcf5a243d1cc67b7218602aee9e04b2fffffffff020d000000000000001976a9147072e2ef390050bc43726d487c117f96da9c534b88ac03410f00000000001976a9147072e2ef390050bc43726d487c117f96da9c534b88ac0000000001010100000002dcec59955b1601f08f2d14a1b6f18c02dd10fb2b2ea18bd3d3d070c56912a99702000000b3483045022100953d0ed90e2ae7f7a842ba7961e31a531f8ed1db91fc7245672a69dead22b31502207fa33ad7519150e9724cc6795c37c1f9dda5b4fce8d2531ec0ed69c0393440a24147304402203cfbf38f7cc020985f4d833b7bcf25bd7a0531a73c65f030f0da43815bd4de0002203590f259bb58ae03f3cb682ed2282c0c975f928149ad7a589fdf86b750b660ccc12103e89354e2a5bf62162fb0c1345cf35921571cc52ccb216bd0e0f7856e561ce7ccffffffff1935121cc48c3bcfebf0998fc8f96522eeb1954c69aeaec6b2d371aad5fd215d000000006b483045022100f1c53cec6791f52bfb3711f36514635bf9f99446904bb2e2a29f0f21cad897350220422b56da4b5f84c9b353f44d0451ba990ff78d2c4d1fcb9e098d15e9875e1a934121020a177d6a5e6f3a8689acd2e313bd1cf0dcf5a243d1cc67b7218602aee9e04b2fffffffff030100000000000000d10063036f726451126170706c69636174696f6e2f6273762d3230004c777b2270223a226273762d3230222c226f70223a227472616e73666572222c226964223a22616535396633623839386563363161636264623663633761323435666162656465643063303934626630343666333532303661336165633630656638383132375f30222c22616d74223a22353030303030227d6876a914766fd38ca729b7f808082b4ac045fe03dafcb9fa88ad21020a177d6a5e6f3a8689acd2e313bd1cf0dcf5a243d1cc67b7218602aee9e04b2fac0100000000000000ce0063036f726451126170706c69636174696f6e2f6273762d3230004c747b2270223a226273762d3230222c226f70223a227472616e73666572222c226964223a22616535396633623839386563363161636264623663633761323435666162656465643063303934626630343666333532303661336165633630656638383132375f30222c22616d74223a22313030227d6876a9145d34be178f0bc32c3d85671427f1e70694ca8a3b88ad21020a177d6a5e6f3a8689acd2e313bd1cf0dcf5a243d1cc67b7218602aee9e04b2fac0100000000000000d20063036f726451126170706c69636174696f6e2f6273762d3230004c787b2270223a226273762d3230222c226f70223a227472616e73666572222c226964223a22616535396633623839386563363161636264623663633761323435666162656465643063303934626630343666333532303661336165633630656638383132375f30222c22616d74223a2237343938383030227d6876a914c28362898660c27aea1d07d308caa8e9d7c3f75188ad21020a177d6a5e6f3a8689acd2e313bd1cf0dcf5a243d1cc67b7218602aee9e04b2fac00000000")

// var proof, _ = hex.DecodeString("feeaf30d000f021402241cda954289425d6c11de3b7877cc5c558cf680370539d0427ddc5f05994b8715020f0367f361396090bee1930981d34b0dd349d5a1b1bd3fa273f77c72e7a7b6fa010b0039b57ef1a12c622a06b63b817d658a731fb458147b91f31b0de5f7b04cbbb698010400d8c8e55b4bdca229ea8d15d8fbe6814c2ef188302faac41245145b8138ba0d3301030026e75227e16e576877381a67ac919b6b789863e082df4338a2cc2f150d407a510100007fc6a0b64445756f1f05df132950ec25ecef51d22522f58cf76eee78d4db35860101009a539e3e86c7533213195e4597175cd5f94443c2bea48440623ec8ac470a300b0101008025cc3a972129d87d07c19dde6955712d7d52f10f1e1fa0417e83def80fcafc010100fd5740d6bbcaa8a13959c5b4762f5ee28c3b926fdddc9b5c3e18d3fa74b955b80101000313c5d378a180696d2e41565db323e20a4e121fa27c0c905f21e0022fa1daaf0101006676a8a015646ea65fab9624960ad78084afbc9e3e37440effef21f7e574f9eb0101001c30990665f0d9726922a2064a36f4223d255c4ec831cf801b0dce5602e1fb2c01010029f55bde10ea6cc0870d135245c04674f34bd914ac212f419fda190970efeb380101009cb7989ffc7f7c45f3ea33932c3cce2812fa944d9dc39ee4d087f1ad335ad173010100b888ce004fd0cbeaf2a1234598a8cc9d57fcfd57f407fffab233d0af4195b2a8010100af3f3a27be231f0c712891aec7d9c3ca5d0c244a5445f0244ca4f5aa565e81c7")
var proof, _ = hex.DecodeString("feeaf30d000f021402241cda954289425d6c11de3b7877cc5c558cf680370539d0427ddc5f05994b8715020f0367f361396090bee1930981d34b0dd349d5a1b1bd3fa273f77c72e7a7b6fa010b0039b57ef1a12c622a06b63b817d658a731fb458147b91f31b0de5f7b04cbbb698010400d8c8e55b4bdca229ea8d15d8fbe6814c2ef188302faac41245145b8138ba0d330103000cf5328042f14eacfa681115a0aed2db316f4158bf89710497fa608a874a4d7e0100005ea81dda40bacf3837da1b848646bc0fdd3eac28c73a7107fc32f42eef4c462001010059938760f4c63030406c824c2eb46a3ccd4083f34a20bfeb4e51170cdff4195001010004cf55382513caacf64064ea04fe4594ac50ac9d532c8f2779ca5639c20faa400101000fec70f7386fa327365f59aea4f3867a120abf6d0c1776145e0a7f858cc3d8a3010100222dacf3135e3a2bd33facd0203a6a233c413cbe1efbe462f28ff6eb996ca326010100bbe5436ee077b98e6fc5a0a088b6071c23acebc6dec9c5f371b2038a90546756010100b69351561d9d59fe8c9c4b4c70d50dcc621a7ca045ab73bc8027df9921a4978201010011415af22eb3fc2f048f72ddcc56e3e5e03ba52870604ae478e51c111e1f5c0f01010076019008a8194d90e66690e1b1257f246e19089c0af017ff886e01bdb585458f01010057034f1a8a140355b59aeb73cfb3f8780ad532349b4948c5f56e572e394564d3010100761a292a904b722168f81fe152a912e451ddf0e781fc6ec351e53ee6e273435d")

func TestBEEF(t *testing.T) {
	bump, err := transaction.NewMerklePathFromBinary(proof)
	if err != nil {
		t.Fatalf("failed to create Merkle path: %v", err)
	}
	txid, err := chainhash.NewHashFromHex("fab6a7e7727cf773a23fbdb1a1d549d30d4bd3810993e1be90603961f367030f")
	if err != nil {
		t.Fatalf("failed to create txid: %v", err)
	}
	root, err := bump.ComputeRoot(txid)
	if err != nil {
		t.Fatalf("failed to compute Merkle root: %v", err)
	}
	log.Println("Merkle root:", root)
	assert.True(t, false, "stop")
}
